## SmartDataGrid.js

We extend Syncfusion Essential2.js Grid to created an enhanced grid component (EGC) that shall meet the following requirements:

1. The component shall be able to be generated from a JSON description.
2. The JSON provided as input state should be used to generate columns and apply formulas to the columns. 
3. The component shall be able to generate a text/numeric/datatime/boolean column
4. The component shall be able to generate a checkbox column.
5. The component shall be able to generate a selection columns with multiple values.
6. The component shall be able to generate three coupled columns in which the last is a button, we call this triplecol.
7. The triplecol shall be able to raise a modal with a grid component inside using data provided via a ODATA/REST API and select a value from the grid.
8. The component works in two ways: editMode and selectionMode.
9. The component shall be able do cut and paste as it were a text editor.
10. The JSON description should be able to be mark column readonly.
11. The component shall use keywords: 
..* CTRL+C (copy), CTRL+V(paste), CTRL+X (cut)
..* CTRL+space (pass from SelectionMode to EditMode),
..* Ins (insertion to top), space for selecting a checkbox.
..* Del (delete current row)
12. The component shall be able resolve in the triplecall(see point 6), from the first textbox all the remaining parts.
13. The component should apply the provided formulas when passing to editMode to selectionMode
14. The JSON description provides the description to columns and a formula to apply to the columns.
15. The component generated shall be able to save its columns positions and size to the configuration service via Google RPC (grpc.fleetadmiral.net)


# Column types
We provide support for the autogenerated line grid from JSON. In a line grid we support three kind of columns:
1. Standard Column. It is a textbox with primitive datatypes: string, date, numeric
2. CodeName Column. It is a row of textboxs that is finished from a button. The resposibility of the button is to show 
   a modal window with a grid with crossreference to a provided ODATA Rest Webservice, providing a selection option.
3. Checkbox Column. It is a checkbox column mapped to a boolean value.
4. Selection Column. It is an html select element mapped to a list of SelectedValues.

A comprensive example of different columns is below.
```javascript
/**
 *  This is a sample of JSON to be used for generating a grid
 *  A grid with several columns 
 */
// column 1 type standard

[ 
    { 
       "Id":"1",
       "Type":"Standard",
       "Header":"Code",
       "Width":null,
       "WebserviceUri":null,
       "ModalGridId":null,
       "ModalTitle":null,
       "ModalCols":null,
       "Fields":[ 
          { 
             "Name":"Code",
             "Header":"Unknown",
             "DataType":"string",
             "Width":null,
             "Hidden": false,
             "Format":null,
             "SelectionValues":null
          }
       ]
    },
    // column 2 type codeName. A set of textbox ended with a button that when clicked shows a modal
  { 
       "Id":"2",
       "Type":"CodeName",
       "Header":"Concept",
       "Width":null,
       "WebserviceUri":"http://api.fleetadmiral.net/odata/Concepts",
       "ModalGridId":"Desc1891",
       "ModalTitle":"Concept Listing",
       "ModalCols":{ 
           // description and fields at webserviceuri to be associated with the modal.
          "Columns":[ 
             { 
                "Id":"21",
                "Type":"Standard",
                "Header":"Code",
                "Width":null,
                "WebserviceUri":null,
                "ModalGridId":null,
                "ModalTitle":null,
                "ModalCols":null,
                "Fields":[ 
                   { 
                      "Name":"Code",
                      "Header":"Unknown",
                      "DataType":"string",
                      "Width":null,
                      "Hidden": false,
                      "Format":null,
                      "SelectionValues":null
                   },
                   { 
                      "Name":"Description",
                      "Header":"Unknown",
                      "DataType":"string",
                      "Width":null,
                      "Hidden": false,
                      "Format":null,
                      "SelectionValues":null
                   }
                ]
             }
          ]
       },
       // data trasnfer object fields to be associated to the textbox
       "Fields":[ 
          { 
             "Name":"ConceptCode",
             "Header":"Cod.Concepto",
             "DataType":"string",
             "Width":null,
             "Hidden": false,
             "Format":null,
             "SelectionValues":null
          },
          { 
             "Name":"ConceptName",
             "Header":"Nombre Concepto",
             "DataType":"string",
             "Width":null,
             "Hidden": false,
             "Format":null,
             "SelectionValues":null
          }
       ]
    },
    // column3 checkbox column
    { 
       "Id":"3",
       "Type":"Checkbox",
       "Header":"Included",
       "Width":null,
       "WebserviceUri":null,
       "ModalGridId":null,
       "ModalTitle":null,
       "ModalCols":null,
       "Fields":[ 
          { 
             "Name":"Included",
             "Header":"Unknown",
             "DataType":"boolean",
             "Width":null,
             "Hidden": false,
             "Format":null,
             "SelectionValues":null
          }
       ]
    },
    // column 5 standard column
    { 
       "Id":"5",
       "Type":"Standard",
       "Header":"Subtotal",
       "Width":null,
       "WebserviceUri":null,
       "ModalGridId":null,
       "ModalTitle":null,
       "ModalCols":null,
       "Fields":[ 
          { 
             "Name":"Subtotal",
             "Header":"Unknown",
             "DataType":"numeric",
             "Width":null,
             "Format":null,
             "SelectionValues":null
          }
       ]
    },
    // column 6
    { 
       "Id":"6",
       "Type":"Standard",
       "Header":"LastModification",
       "Width":null,
       "WebserviceUri":null,
       "ModalGridId":null,
       "ModalTitle":null,
       "ModalCols":null,
       "Fields":[ 
          { 
             "Name":"CurrentUser",
             "Header":"Unknown",
             "DataType":"string",
             "Width":null,
             "Format":null,
             "SelectionValues":null
          }
       ]
    },
    // Selection column to be used to select values, creata a select/option component with the selected values
    { 
       "Id":"7",
       "Type":"Selection",
       "Header":"Unity",
       "Width":null,
       "WebserviceUri":null,
       "ModalGridId":null,
       "ModalTitle":null,
       "ModalCols":null,
       "Fields":[ 
          { 
             "Name":"Unity",
             "Header":"Unknown",
             "DataType":"string",
             "Width":null,
             "Format":null,
             "SelectionValues":[ 
                "DAY MONTH",
                "CONDUCTOR"
             ]
          }
       ]
    }
 ]
 ```
## ASP.NET Core 2 

In ASP.net Core we provide the following objects:

   1. GridLineConfig that holds the responsibility when serialized to generate a configuration. A GridLineConfig is a set of GridLineColumns.
   2. GridLineColumn that holds the responsibility to configure the type (Standard, CheckT). A GridLineColumn is composed of one or more fields.
   2. GridLineField that holds the responsibility to define a field.
   A shortexample below
```c#
 var config = new GridLineConfig
            {
               Formula = "((1 * 2) - (10 % (1-2)))"
               Columns = new List<GridLineColumn>()
            {
                new GridLineColumn()
                {
                    Id = "1",
                    Type="Standard",
                    Header = "Code",
                    Fields = new List<GridLineField>()
                    {
                        new GridLineField()
                        {
                            DataType = "string",
                            Name= "Code"
                        }
                    }
                }}}
var json = JsonConvert.SerializeObject(config)
```

## JSON 
When the column is serialized in json the result can be as above. Any kind of possibility is allowed. You can generate any kind of column in any order.

## Features 

1. The generated grid can do drag and drop of the lines
2. The generated grid can do the resize of the lines.
3. The generated grid can save the settings to the cloud.
4. In the specification of the we can used or apply a formula provided by json.

## Attached Formula
The formula is based on the following grammar antlr:
```
grammar grid_formula;
    formulas
    : formula EOF
    ;
    formula
        :   '(' formula op formula ')' |  NUMBER       
        ;
    op 
        :  '/' | '+' | '*' | '-' | '%'
        ;
    NUMBER
        : [0-9]+
        ;


```



                
